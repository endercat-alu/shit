<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çŒœShitæ¸¸æˆ</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <style>
        /* --- åŸºç¡€æ ·å¼ --- */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Segoe UI Emoji', 'Apple Color Emoji', 'Noto Color Emoji', sans-serif;
            overflow: hidden;
        }

        .game-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            padding: 20px;
            box-sizing: border-box;
        }

        .title {
            text-align: center;
            color: white;
            font-size: 2.5em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .game-area {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .boxes-container {
            position: relative;
            width: 80%;
            height: 60%;
            max-width: 800px;
            max-height: 400px;
        }

        .box {
            position: absolute;
            width: 80px;
            height: 80px;
            background: #fff;
            border: 3px solid #333;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            user-select: none;
        }

        .box:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 12px rgba(0,0,0,0.4);
        }

        .box.hidden {
            background: #ddd;
        }

        .box.hidden .content {
            display: none;
        }

        .box.correct {
            background: #4CAF50;
            animation: bounce 0.5s ease;
        }

        .box.wrong {
            background: #f44336;
            animation: shake 0.5s ease;
        }

        @keyframes bounce {
            0%, 20%, 60%, 100% { transform: translateY(0); }
            40% { transform: translateY(-20px); }
            80% { transform: translateY(-10px); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
            20%, 40%, 60%, 80% { transform: translateX(10px); }
        }

        .controls {
            background: rgba(255,255,255,0.9);
            padding: 20px;
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .control-group label {
            font-weight: bold;
            color: #333;
        }

        .control-group input {
            width: 60px;
            padding: 5px;
            border: 2px solid #ddd;
            border-radius: 5px;
            text-align: center;
            font-size: 16px;
        }



        .btn {
            padding: 10px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: background 0.3s ease;
        }

        .btn:hover {
            background: #5a6fd8;
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 20px 40px;
            border-radius: 15px;
            font-size: 1.5em;
            text-align: center;
            z-index: 1000;
            display: none;
        }

        .message.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }

        .countdown {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.9);
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
        }

        .status-hint {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.6);
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.9em;
            z-index: 100;
            display: none;
        }

        .status-hint.show {
            display: block;
            animation: fadeInOut 2s ease;
        }

        @keyframes fadeInOut {
            0% { opacity: 0; transform: translateX(-50%) translateY(10px); }
            20%, 80% { opacity: 1; transform: translateX(-50%) translateY(0); }
            100% { opacity: 0; transform: translateX(-50%) translateY(-10px); }
        }

        /* æ‰‹æœºé€‚é…æ ·å¼ */
        .mobile-gaming .title {
            display: none;
        }

        .mobile-gaming .controls {
            position: fixed;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255,255,255,0.95);
            padding: 8px 15px;
            border-radius: 20px;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .mobile-gaming .controls .control-group {
            display: none;
        }

        .mobile-gaming .controls #gameBtn {
            padding: 8px 16px;
            font-size: 14px;
            margin: 0;
        }

        .mobile-gaming .game-area {
            padding-top: 60px; /* ä¸ºé¡¶éƒ¨æŒ‰é’®ç•™å‡ºç©ºé—´ */
        }

        /* æ£€æµ‹æ‰‹æœºè®¾å¤‡ */
        @media (max-width: 768px) and (pointer: coarse) {
            .game-container {
                padding: 10px;
            }

            .title {
                font-size: 2em;
                margin-bottom: 15px;
            }

            .controls {
                padding: 15px;
                gap: 15px;
            }

            .control-group label {
                font-size: 14px;
            }

            .control-group input {
                width: 50px;
                font-size: 14px;
            }

            .btn {
                padding: 8px 16px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1 class="title">ğŸ¯ çŒœShitæ¸¸æˆ ğŸ’©</h1>
        
        <div class="game-area">
            <div class="boxes-container" id="boxesContainer">
                <!-- ç›’å­å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
            </div>
            <div class="countdown" id="countdown" style="display: none;"></div>
            <div class="status-hint" id="statusHint"></div>
        </div>

        <div class="message" id="message"></div>

        <div class="controls">
            <div class="control-group">
                <label for="totalBoxes">æ€»ç›’å­æ•° (N):</label>
                <input type="number" id="totalBoxes" min="2" max="10" value="3">
            </div>
            <div class="control-group">
                <label for="cleanBoxes">æ— shitç›’å­æ•° (n):</label>
                <input type="number" id="cleanBoxes" min="1" max="5" value="1">
            </div>
            <div class="control-group">
                <label for="showTime">æ˜¾ç¤ºæ—¶é—´ (tç§’):</label>
                <input type="number" id="showTime" min="1" max="10" value="1">
            </div>
            <div class="control-group">
                <label for="animationSpeed">åŠ¨ç”»é€Ÿåº¦:</label>
                <input type="number" id="animationSpeed" min="0.5" max="5" step="0.1" value="1.5">
            </div>
            <div class="control-group">
                <label for="delayTime">å»¶è¿Ÿæ—¶é—´ (t1ç§’):</label>
                <input type="number" id="delayTime" min="0" value="5">
            </div>
            <button class="btn" id="gameBtn" onclick="toggleGame()">å¼€å§‹æ¸¸æˆ</button>
        </div>
    </div>

    <script>
        // æ¸¸æˆçŠ¶æ€
        let gameState = {
            isPlaying: false,
            isShowing: false,
            canSelect: false,
            boxes: [],
            cleanBoxIndices: [],
            totalBoxes: 3,
            cleanBoxes: 1,
            showTime: 1,
            delayTime: 5,
            animationSpeed: 1.5,
            animationId: null,
            startTime: 0,
            isMobile: false
        };

        // æ£€æµ‹æ˜¯å¦ä¸ºæ‰‹æœºè®¾å¤‡
        function detectMobile() {
            const userAgent = navigator.userAgent.toLowerCase();
            const isMobileUA = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(userAgent);
            const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
            const isSmallScreen = window.innerWidth <= 768;

            gameState.isMobile = isMobileUA && isTouchDevice && isSmallScreen;
            return gameState.isMobile;
        }

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            const container = document.getElementById('boxesContainer');
            container.innerHTML = '';
            gameState.boxes = [];

            // è·å–å‚æ•°
            gameState.totalBoxes = parseInt(document.getElementById('totalBoxes').value);
            gameState.cleanBoxes = parseInt(document.getElementById('cleanBoxes').value);
            gameState.showTime = parseInt(document.getElementById('showTime').value);
            gameState.delayTime = parseInt(document.getElementById('delayTime').value);
            gameState.animationSpeed = parseFloat(document.getElementById('animationSpeed').value);

            // éªŒè¯å‚æ•°
            if (gameState.cleanBoxes >= gameState.totalBoxes) {
                showMessage('æ— shitç›’å­æ•°ä¸èƒ½å¤§äºç­‰äºæ€»ç›’å­æ•°ï¼');
                return false;
            }

            // éšæœºé€‰æ‹©å“ªäº›ç›’å­æ˜¯å¹²å‡€çš„
            gameState.cleanBoxIndices = [];
            while (gameState.cleanBoxIndices.length < gameState.cleanBoxes) {
                const index = Math.floor(Math.random() * gameState.totalBoxes);
                if (!gameState.cleanBoxIndices.includes(index)) {
                    gameState.cleanBoxIndices.push(index);
                }
            }

            // åˆ›å»ºç›’å­
            for (let i = 0; i < gameState.totalBoxes; i++) {
                const box = createBox(i);
                gameState.boxes.push(box);
                container.appendChild(box.element);
            }

            // åˆå§‹ä½ç½®æ’åˆ—
            arrangeBoxes();
            return true;
        }

        // åˆ›å»ºå•ä¸ªç›’å­
        function createBox(index) {
            const element = document.createElement('div');
            element.className = 'box';
            element.onclick = () => selectBox(index);

            const content = document.createElement('div');
            content.className = 'content';
            content.textContent = gameState.cleanBoxIndices.includes(index) ? 'âœ¨' : 'ğŸ’©';
            element.appendChild(content);

            return {
                element: element,
                index: index,
                x: 0,
                y: 0,
                targetX: 0,
                targetY: 0,
                isClean: gameState.cleanBoxIndices.includes(index)
            };
        }

        // æ’åˆ—ç›’å­åˆå§‹ä½ç½®
        function arrangeBoxes() {
            const container = document.getElementById('boxesContainer');
            const containerRect = container.getBoundingClientRect();
            const boxSize = 80;
            const gap = 20;

            // è®¡ç®—ç½‘æ ¼å¸ƒå±€
            const cols = Math.ceil(Math.sqrt(gameState.totalBoxes));
            const rows = Math.ceil(gameState.totalBoxes / cols);

            const totalWidth = cols * boxSize + (cols - 1) * gap;
            const totalHeight = rows * boxSize + (rows - 1) * gap;

            const startX = (containerRect.width - totalWidth) / 2;
            const startY = (containerRect.height - totalHeight) / 2;

            gameState.boxes.forEach((box, index) => {
                const row = Math.floor(index / cols);
                const col = index % cols;

                box.x = startX + col * (boxSize + gap);
                box.y = startY + row * (boxSize + gap);
                box.targetX = box.x;
                box.targetY = box.y;

                box.element.style.left = box.x + 'px';
                box.element.style.top = box.y + 'px';
            });
        }

        // æ™ºèƒ½æ¸¸æˆæŒ‰é’®åˆ‡æ¢
        function toggleGame() {
            if (gameState.isPlaying) {
                resetGame();
            } else {
                startGame();
            }
        }

        // å¼€å§‹æ¸¸æˆ
        function startGame() {
            if (!initGame()) return;

            gameState.isPlaying = true;
            gameState.isShowing = true;
            gameState.canSelect = false;
            gameState.startTime = Date.now();

            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            updateGameButton();

            // æ‰‹æœºé€‚é…ï¼šéšè—æ§åˆ¶æ å’Œæ ‡é¢˜
            if (gameState.isMobile) {
                document.body.classList.add('mobile-gaming');
            }

            // ç¦ç”¨æ§åˆ¶å‚æ•°
            document.getElementById('totalBoxes').disabled = true;
            document.getElementById('cleanBoxes').disabled = true;
            document.getElementById('showTime').disabled = true;
            document.getElementById('delayTime').disabled = true;
            document.getElementById('animationSpeed').disabled = true;

            // æ˜¾ç¤ºå†…å®¹ç‰©
            gameState.boxes.forEach(box => {
                box.element.classList.remove('hidden');
            });

            // å¼€å§‹å€’è®¡æ—¶
            startCountdown();
        }

        // å€’è®¡æ—¶æ˜¾ç¤º
        function startCountdown() {
            const countdownEl = document.getElementById('countdown');
            countdownEl.style.display = 'block';
            let timeLeft = gameState.showTime;

            const updateCountdown = () => {
                countdownEl.textContent = `${timeLeft}ç§’`;
                timeLeft--;

                if (timeLeft < 0) {
                    countdownEl.style.display = 'none';
                    hideContents();
                } else {
                    setTimeout(updateCountdown, 1000);
                }
            };

            updateCountdown();
        }

        // éšè—å†…å®¹å¹¶å¼€å§‹åŠ¨ç”»
        function hideContents() {
            gameState.isShowing = false;

            // éšè—æ‰€æœ‰ç›’å­å†…å®¹
            gameState.boxes.forEach(box => {
                box.element.classList.add('hidden');
            });

            // å¼€å§‹ç§»åŠ¨åŠ¨ç”»
            startAnimation();

            // è®¾ç½®å»¶è¿Ÿåå…è®¸é€‰æ‹©
            setTimeout(() => {
                if (gameState.isPlaying) {
                    gameState.canSelect = true;
                    showStatusHint('å¯ä»¥é€‰æ‹©äº†');
                }
            }, gameState.delayTime * 1000);
        }

        // å¼€å§‹ç›’å­æ··æ²Œè¿åŠ¨åŠ¨ç”»
        function startAnimation() {
            const container = document.getElementById('boxesContainer');
            const containerRect = container.getBoundingClientRect();

            // ä¸ºæ¯ä¸ªç›’å­è®¾ç½®æ··æ²Œè¿åŠ¨å‚æ•°
            gameState.boxes.forEach((box, index) => {
                // æ¯ä¸ªç›’å­æœ‰ä¸åŒçš„æ··æ²Œå‚æ•°
                box.chaosA = 2.5 + Math.random() * 2; // æ··æ²Œç³»æ•°A
                box.chaosB = 1.8 + Math.random() * 1.5; // æ··æ²Œç³»æ•°B
                box.chaosC = 0.3 + Math.random() * 0.4; // æ··æ²Œç³»æ•°C
                box.phase = Math.random() * Math.PI * 2; // ç›¸ä½åç§»
                box.centerX = containerRect.width / 2; // ä¸­å¿ƒX
                box.centerY = containerRect.height / 2; // ä¸­å¿ƒY
                box.radiusX = (containerRect.width - 80) * 0.4; // Xè½´åŠå¾„
                box.radiusY = (containerRect.height - 80) * 0.4; // Yè½´åŠå¾„
            });

            // åŠ¨ç”»å¾ªç¯
            const animate = () => {
                const currentTime = (Date.now() - gameState.startTime) / 1000; // å½“å‰æ—¶é—´ï¼ˆç§’ï¼‰
                const speed = gameState.animationSpeed;

                gameState.boxes.forEach((box, index) => {
                    // æ··æ²Œè¿åŠ¨æ–¹ç¨‹ - åŸºäºæ´›ä¼¦å…¹å¸å¼•å­çš„å˜å½¢
                    const t = currentTime * speed + box.phase;

                    // ä½¿ç”¨å¤šä¸ªæ­£å¼¦å’Œä½™å¼¦å‡½æ•°åˆ›å»ºå¤æ‚çš„æ··æ²Œè½¨è¿¹
                    const x1 = Math.sin(t * box.chaosA) * Math.cos(t * box.chaosB);
                    const y1 = Math.cos(t * box.chaosA) * Math.sin(t * box.chaosB);
                    const x2 = Math.sin(t * box.chaosC) * 0.5;
                    const y2 = Math.cos(t * box.chaosC) * 0.5;

                    // ç»„åˆå¤šä¸ªæ··æ²Œåˆ†é‡
                    const chaosX = (x1 + x2) * box.radiusX;
                    const chaosY = (y1 + y2) * box.radiusY;

                    // è®¡ç®—æœ€ç»ˆä½ç½®
                    box.x = box.centerX + chaosX - 40; // å‡å»ç›’å­å®½åº¦çš„ä¸€åŠ
                    box.y = box.centerY + chaosY - 40; // å‡å»ç›’å­é«˜åº¦çš„ä¸€åŠ

                    // ç¡®ä¿ç›’å­åœ¨è¾¹ç•Œå†…
                    box.x = Math.max(0, Math.min(containerRect.width - 80, box.x));
                    box.y = Math.max(0, Math.min(containerRect.height - 80, box.y));

                    box.element.style.left = box.x + 'px';
                    box.element.style.top = box.y + 'px';
                });

                if (gameState.isPlaying) {
                    gameState.animationId = requestAnimationFrame(animate);
                }
            };

            animate();
        }

        // é€‰æ‹©ç›’å­
        function selectBox(index) {
            if (!gameState.isPlaying || gameState.isShowing || !gameState.canSelect) {
                if (!gameState.canSelect && gameState.isPlaying && !gameState.isShowing) {
                    showStatusHint('è¯·ç­‰å¾…å»¶è¿Ÿæ—¶é—´ç»“æŸ');
                }
                return;
            }

            const selectedBox = gameState.boxes[index];

            // åœæ­¢åŠ¨ç”»
            if (gameState.animationId) {
                cancelAnimationFrame(gameState.animationId);
                gameState.animationId = null;
            }

            // æ˜¾ç¤ºæ‰€æœ‰ç›’å­å†…å®¹
            gameState.boxes.forEach(box => {
                box.element.classList.remove('hidden');
            });

            // æ£€æŸ¥é€‰æ‹©æ˜¯å¦æ­£ç¡®
            if (selectedBox.isClean) {
                selectedBox.element.classList.add('correct');
                showMessage('ğŸ‰ æ­å–œï¼ä½ æ‰¾åˆ°äº†å¹²å‡€çš„ç›’å­ï¼');
            } else {
                selectedBox.element.classList.add('wrong');
                // é«˜äº®æ˜¾ç¤ºæ‰€æœ‰æ­£ç¡®ç­”æ¡ˆ
                gameState.boxes.forEach(box => {
                    if (box.isClean) {
                        box.element.classList.add('correct');
                    }
                });
                showMessage('ğŸ’© è¸©åˆ°ç‹—å±äº†ï¼');
            }

            // æ¸¸æˆç»“æŸ
            gameState.isPlaying = false;

            // æ‰‹æœºé€‚é…ï¼šæ¢å¤æ§åˆ¶æ å’Œæ ‡é¢˜æ˜¾ç¤º
            if (gameState.isMobile) {
                document.body.classList.remove('mobile-gaming');
            }

            // å»¶è¿Ÿåé‡æ–°å¯ç”¨æ§åˆ¶å‚æ•°å’Œæ›´æ–°æŒ‰é’®
            setTimeout(() => {
                updateGameButton();
                document.getElementById('totalBoxes').disabled = false;
                document.getElementById('cleanBoxes').disabled = false;
                document.getElementById('showTime').disabled = false;
                document.getElementById('delayTime').disabled = false;
                document.getElementById('animationSpeed').disabled = false;
            }, 2000);
        }

        // é‡ç½®æ¸¸æˆ
        function resetGame() {
            // åœæ­¢åŠ¨ç”»
            if (gameState.animationId) {
                cancelAnimationFrame(gameState.animationId);
                gameState.animationId = null;
            }

            // é‡ç½®çŠ¶æ€
            gameState.isPlaying = false;
            gameState.isShowing = false;
            gameState.canSelect = false;

            // æ‰‹æœºé€‚é…ï¼šæ¢å¤æ§åˆ¶æ å’Œæ ‡é¢˜æ˜¾ç¤º
            if (gameState.isMobile) {
                document.body.classList.remove('mobile-gaming');
            }

            // æ¸…ç©ºå®¹å™¨
            const container = document.getElementById('boxesContainer');
            container.innerHTML = '';

            // éšè—å€’è®¡æ—¶å’Œæ¶ˆæ¯
            document.getElementById('countdown').style.display = 'none';
            hideMessage();

            // æ›´æ–°æŒ‰é’®çŠ¶æ€å’Œé‡æ–°å¯ç”¨æ§åˆ¶å‚æ•°
            updateGameButton();
            document.getElementById('totalBoxes').disabled = false;
            document.getElementById('cleanBoxes').disabled = false;
            document.getElementById('showTime').disabled = false;
            document.getElementById('delayTime').disabled = false;
            document.getElementById('animationSpeed').disabled = false;
        }

        // æ˜¾ç¤ºæ¶ˆæ¯
        function showMessage(text, duration = 3000) {
            const messageEl = document.getElementById('message');
            messageEl.textContent = text;
            messageEl.classList.add('show');

            setTimeout(() => {
                hideMessage();
            }, duration);
        }

        // éšè—æ¶ˆæ¯
        function hideMessage() {
            const messageEl = document.getElementById('message');
            messageEl.classList.remove('show');
        }

        // æ˜¾ç¤ºçŠ¶æ€æç¤ºï¼ˆåº•éƒ¨å°å­—ï¼‰
        function showStatusHint(text) {
            const hintEl = document.getElementById('statusHint');
            hintEl.textContent = text;
            hintEl.classList.remove('show');
            // å¼ºåˆ¶é‡ç»˜ä»¥é‡æ–°è§¦å‘åŠ¨ç”»
            hintEl.offsetHeight;
            hintEl.classList.add('show');

            // 2ç§’åè‡ªåŠ¨éšè—
            setTimeout(() => {
                hintEl.classList.remove('show');
            }, 2000);
        }

        // æ›´æ–°æ¸¸æˆæŒ‰é’®çŠ¶æ€
        function updateGameButton() {
            const btn = document.getElementById('gameBtn');
            if (gameState.isPlaying) {
                btn.textContent = 'é‡æ–°å¼€å§‹';
                btn.disabled = false;
            } else {
                btn.textContent = 'å¼€å§‹æ¸¸æˆ';
                btn.disabled = false;
            }
        }

        // çª—å£å¤§å°æ”¹å˜æ—¶é‡æ–°æ’åˆ—ç›’å­å’Œæ£€æµ‹è®¾å¤‡
        window.addEventListener('resize', () => {
            // é‡æ–°æ£€æµ‹æ˜¯å¦ä¸ºæ‰‹æœºè®¾å¤‡
            detectMobile();

            if (!gameState.isPlaying && gameState.boxes.length > 0) {
                arrangeBoxes();
            }
        });

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('load', () => {
            // åˆå§‹åŒ–æ‰‹æœºæ£€æµ‹
            detectMobile();

            // éªŒè¯è¾“å…¥å€¼
            document.getElementById('totalBoxes').addEventListener('change', function() {
                const cleanBoxes = parseInt(document.getElementById('cleanBoxes').value);
                const totalBoxes = parseInt(this.value);
                if (cleanBoxes >= totalBoxes) {
                    document.getElementById('cleanBoxes').value = Math.max(1, totalBoxes - 1);
                }
            });

            document.getElementById('cleanBoxes').addEventListener('change', function() {
                const totalBoxes = parseInt(document.getElementById('totalBoxes').value);
                const cleanBoxes = parseInt(this.value);
                if (cleanBoxes >= totalBoxes) {
                    this.value = Math.max(1, totalBoxes - 1);
                }
            });

            // å»¶è¿Ÿæ—¶é—´è¾“å…¥æ¡†äº‹ä»¶ç›‘å¬
            document.getElementById('delayTime').addEventListener('change', function() {
                const delay = parseInt(this.value);
                if (delay < 0) {
                    this.value = 0;
                }
            });

            // åŠ¨ç”»é€Ÿåº¦è¾“å…¥æ¡†äº‹ä»¶ç›‘å¬
            document.getElementById('animationSpeed').addEventListener('change', function() {
                const speed = parseFloat(this.value);
                // éªŒè¯è¾“å…¥å€¼
                if (speed < 0.5) {
                    this.value = 0.5;
                    return;
                }
                if (speed > 5) {
                    this.value = 5;
                    return;
                }
                // å¦‚æœæ¸¸æˆæ­£åœ¨è¿›è¡Œä¸­ï¼Œå®æ—¶æ›´æ–°é€Ÿåº¦
                if (gameState.isPlaying && !gameState.isShowing) {
                    gameState.animationSpeed = speed;
                }
            });
        });
    </script>
</body>
</html>
