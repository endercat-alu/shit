<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¾¿ä¾¿é›¨</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <style>
        /* --- åŸºç¡€æ ·å¼ --- */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden; /* éšè—è¶…å‡ºå±å¹•çš„å…ƒç´ ï¼Œé˜²æ­¢å‡ºç°æ»šåŠ¨æ¡ */
            background-color: #0f172a; /* æ·±è“è‰²èƒŒæ™¯ï¼Œçªå‡º emoji */
            font-family: 'Segoe UI Emoji', 'Apple Color Emoji', 'Noto Color Emoji', sans-serif;
        }

        /* --- â€œä¾¿ä¾¿â€è¡¨æƒ…ç¬¦å·çš„æ ·å¼ --- */
        .poop {
            position: absolute; /* ä½¿ç”¨ç»å¯¹å®šä½ï¼Œä»¥ä¾¿è‡ªç”±ç§»åŠ¨ */
            user-select: none; /* ç¦æ­¢ç”¨æˆ·é€‰ä¸­ emoji æ–‡æœ¬ */
            pointer-events: none; /* ç©¿é€é¼ æ ‡äº‹ä»¶ï¼Œç¡®ä¿äº‹ä»¶ç”± body æ•è· */
            will-change: transform; /* æ€§èƒ½ä¼˜åŒ–ï¼šå‘Šè¯‰æµè§ˆå™¨è¯¥å…ƒç´ çš„ transform å±æ€§ä¼šé¢‘ç¹å˜åŒ– */
        }
    </style>
</head>
<body>

<script>
    // --- å…¨å±€å˜é‡å’Œå¸¸é‡ ---
    const container = document.body;
    const particles = []; // å­˜å‚¨æ‰€æœ‰â€œä¾¿ä¾¿â€ç²’å­çš„æ•°ç»„
    const PARTICLE_COUNT = 150; // å±å¹•ä¸ŠåŒæ—¶å­˜åœ¨çš„ç²’å­æ•°é‡
    const ATTRACTION_RADIUS = 250; // å¸å¼•åŠ›ç”Ÿæ•ˆçš„åŠå¾„ï¼ˆåƒç´ ï¼‰
    const ATTRACTION_STRENGTH = 0.008; // å¸å¼•åŠ›çš„å¼ºåº¦ï¼ˆå€¼è¶Šå°ï¼Œèšé›†è¶Šæ…¢ï¼‰

    let isPointerDown = false; // æ ‡è®°é¼ æ ‡æˆ–è§¦æ‘¸æ˜¯å¦æŒ‰ä¸‹
    let pointer = { x: 0, y: 0 }; // å­˜å‚¨æŒ‡é’ˆï¼ˆé¼ æ ‡æˆ–æ‰‹æŒ‡ï¼‰çš„åæ ‡

    // --- åˆå§‹åŒ– ---
    // é¡µé¢åŠ è½½å®Œæˆåç«‹å³å¼€å§‹
    window.addEventListener('load', () => {
        setupEventListeners();
        createInitialParticles();
        animate();
    });

    /**
     * è®¾ç½®æ‰€æœ‰éœ€è¦çš„äº‹ä»¶ç›‘å¬å™¨
     */
    function setupEventListeners() {
        // ç›‘å¬é¼ æ ‡æŒ‰ä¸‹å’Œè§¦æ‘¸å¼€å§‹äº‹ä»¶
        container.addEventListener('mousedown', onPointerDown);
        container.addEventListener('touchstart', onPointerDown, { passive: false });

        // ç›‘å¬é¼ æ ‡æ¾å¼€å’Œè§¦æ‘¸ç»“æŸäº‹ä»¶
        container.addEventListener('mouseup', onPointerUp);
        container.addEventListener('touchend', onPointerUp);

        // ç›‘å¬é¼ æ ‡ç§»åŠ¨å’Œè§¦æ‘¸æ»‘åŠ¨äº‹ä»¶
        container.addEventListener('mousemove', onPointerMove);
        container.addEventListener('touchmove', onPointerMove, { passive: false });
        
        // ç›‘å¬çª—å£å¤§å°å˜åŒ–
        window.addEventListener('resize', onWindowResize);
    }

    /**
     * åˆ›å»ºåˆå§‹æ•°é‡çš„â€œä¾¿ä¾¿â€ç²’å­
     */
    function createInitialParticles() {
        for (let i = 0; i < PARTICLE_COUNT; i++) {
            particles.push(createParticle());
        }
    }

    /**
     * åˆ›å»ºå•ä¸ªâ€œä¾¿ä¾¿â€ç²’å­å¯¹è±¡
     * @param {boolean} isInitial - æ˜¯å¦æ˜¯åˆå§‹åˆ›å»ºï¼ˆéšæœºåˆ†å¸ƒåœ¨å±å¹•ä¸Šï¼‰
     * @returns {object} ç²’å­å¯¹è±¡
     */
    function createParticle(isInitial = true) {
        const el = document.createElement('div');
        el.className = 'poop';
        el.textContent = 'ğŸ’©';
        container.appendChild(el);

        const particle = {
            el: el,
            // ä½ç½®
            x: Math.random() * window.innerWidth,
            y: isInitial ? Math.random() * window.innerHeight : -50,
            // é€Ÿåº¦
            vx: 0,
            vy: 0,
            // åŸºç¡€ä¸‹è½é€Ÿåº¦
            baseSpeed: 1 + Math.random() * 2,
            // å¤§å°
            size: 15 + Math.random() * 20,
        };

        particle.el.style.fontSize = `${particle.size}px`;
        return particle;
    }

    // --- åŠ¨ç”»å¾ªç¯ ---
    /**
     * ä¸»åŠ¨ç”»å¾ªç¯ï¼Œä½¿ç”¨ requestAnimationFrame ä»¥è·å¾—æœ€ä½³æ€§èƒ½
     */
    function animate() {
        particles.forEach(p => {
            // å¦‚æœæŒ‡é’ˆè¢«æŒ‰ä¸‹ï¼Œè®¡ç®—å¸å¼•åŠ›
            if (isPointerDown) {
                const dx = pointer.x - p.x;
                const dy = pointer.y - p.y;
                const distance = Math.sqrt(dx * dx + dy * dy);

                // å¦‚æœåœ¨å¸å¼•åŠå¾„å†…ï¼Œæ–½åŠ ä¸€ä¸ªæœå‘æŒ‡é’ˆçš„åŠ›
                if (distance < ATTRACTION_RADIUS) {
                    // ç®€å•çš„çº¿æ€§å¸å¼•åŠ›
                    p.vx += dx * ATTRACTION_STRENGTH;
                    p.vy += dy * ATTRACTION_STRENGTH;
                }
            }

            // æ¨¡æ‹Ÿç©ºæ°”é˜»åŠ›/æ‘©æ“¦åŠ›ï¼Œè®©ç²’å­ç§»åŠ¨æ›´è‡ªç„¶
            p.vx *= 0.95;
            p.vy *= 0.95;

            // æ›´æ–°ç²’å­çš„ä½ç½®
            p.x += p.vx;
            p.y += p.vy + p.baseSpeed; // åŠ ä¸ŠåŸºç¡€ä¸‹è½é€Ÿåº¦

            // ç²’å­å›æ”¶æœºåˆ¶
            // å¦‚æœç²’å­æ‰å‡ºå±å¹•åº•éƒ¨æˆ–è¢«å¸å¼•åŠ›æ‹‰å‡ºå±å¹•è¾¹ç•Œï¼Œåˆ™é‡ç½®å®ƒ
            if (p.y > window.innerHeight + p.size || p.x < -p.size || p.x > window.innerWidth + p.size) {
                resetParticle(p);
            }

            // åº”ç”¨å˜æ¢ï¼Œç§»åŠ¨ç²’å­
            p.el.style.transform = `translate3d(${p.x}px, ${p.y}px, 0)`;
        });

        requestAnimationFrame(animate); // è¯·æ±‚ä¸‹ä¸€å¸§åŠ¨ç”»
    }
    
    /**
     * é‡ç½®å•ä¸ªç²’å­çš„çŠ¶æ€ï¼Œè®©å®ƒä»é¡¶éƒ¨é‡æ–°ä¸‹è½
     * @param {object} particle - éœ€è¦é‡ç½®çš„ç²’å­å¯¹è±¡
     */
    function resetParticle(particle) {
        particle.x = Math.random() * window.innerWidth;
        particle.y = -particle.size; // ä»å±å¹•é¡¶éƒ¨å¤–å¼€å§‹
        particle.vx = 0;
        particle.vy = 0;
    }


    // --- äº‹ä»¶å¤„ç†å‡½æ•° ---
    /**
     * æ›´æ–°æŒ‡é’ˆä½ç½®ï¼ˆå…¼å®¹é¼ æ ‡å’Œè§¦æ‘¸ï¼‰
     * @param {Event} e - äº‹ä»¶å¯¹è±¡
     */
    function updatePointerPosition(e) {
        if (e.touches) {
            // è§¦æ‘¸äº‹ä»¶
            pointer.x = e.touches[0].clientX;
            pointer.y = e.touches[0].clientY;
            e.preventDefault(); // é˜»æ­¢è§¦æ‘¸æ»‘åŠ¨æ—¶é¡µé¢æ»šåŠ¨
        } else {
            // é¼ æ ‡äº‹ä»¶
            pointer.x = e.clientX;
            pointer.y = e.clientY;
        }
    }

    function onPointerDown(e) {
        isPointerDown = true;
        updatePointerPosition(e);
    }

    function onPointerUp() {
        isPointerDown = false;
    }

    function onPointerMove(e) {
        if (isPointerDown) {
            updatePointerPosition(e);
        }
    }
    
    /**
     * å½“çª—å£å¤§å°æ”¹å˜æ—¶ï¼Œå°†æ‰€æœ‰ç²’å­é‡æ–°éšæœºåˆ†å¸ƒ
     */
    function onWindowResize() {
        particles.forEach(p => {
             // å°†ç²’å­éšæœºæ”¾ç½®åœ¨æ–°çª—å£å°ºå¯¸å†…
            p.x = Math.random() * window.innerWidth;
            p.y = Math.random() * window.innerHeight;
            p.vx = 0;
            p.vy = 0;
        });
    }

</script>
</body>
</html>
